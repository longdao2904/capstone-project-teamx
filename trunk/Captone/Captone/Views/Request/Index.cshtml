@model IEnumerable<Captone.Models.Request>

@{
    ViewBag.Title = "Danh sách yêu cầu chuyển phát";
}

<div class="col-lg-12">
    <div class="tabbable">
        <ul id="myTab" class="nav nav-pills">
            @foreach (var stt in ViewBag.Status)
            {
                <li><a href="#pills" id="@stt.DeliveryStatusID" data-toggle="tab" onclick="listStatus(this.id)">@stt.StatusName</a></li>
            }
        </ul>
        <div class="table-responsive" style="margin-top: 1%">
            <div id="dataTables-example_wrapper" class="dataTables_wrapper form-inline" role="grid">
                <div class="col-lg-8">
                    <div class="row" style="margin-bottom: 1%">
                        <div class="col-sm-6">
                            <div class="dataTables_length" id="dataTables-example_length">
                                <label>
                                    Hiển thị
                                <select name="dataTables-example_length" aria-controls="dataTables-example" class="form-control input-sm">
                                    <option value="5">5</option>
                                    <option value="10">10</option>
                                    <option value="20">20</option>
                                    <option value="50">50</option>
                                </select>
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div id="dataTables-example_filter" class="dataTables_filter">
                                <input type="search" placeholder="Tìm kiếm" class="form-control input-sm" aria-controls="dataTables-example" style="float: right">
                            </div>
                        </div>
                    </div>
                </div>
                <div id="request">
                </div>
                <div id="assigning">
                    
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">

    function addActive(id) {
     
        listStatus(id);
        $('#id').addClass("active");
    }
    function listStatus(id) {
        $.ajax({
            url: "/Request/ListRequest",
            type: "Post",
            data: { sttID: id },
            success: function (result) {
                if(id == 3) {
                    ListAssign();
                    $("#request").html("");
                }
                else {
                $("#request").html(result);
                    $("#assigning").html("");
                }
            }
        });
    }
    function ListAssign() {
        $.ajax({
            url: "/Assigning/ListAssign",
            type: "POST",
            success: function (result) {
                $("#assigning").html(result);
            }
        });
    }

    window.onload = addActive(1);
</script>
