@model Captone.Models.Trip

@{
    Layout = null;
}
<div class="row">
    <div id="requests"></div>
</div>
<br />
<p>
    <a href="/Trip/Index">
        <button type="button" class="btn btn-success" onclick="departed()" id="btnDeparted">Xác nhận chuyển đi</button></a>
    <a href="/Trip/Index">
        <button type="button" class="btn btn-success" onclick="arrived()" id="btnArrived">Xe đã đến đích</button></a>
    <a href="/Trip/Delete/@Model.TripID">
        <button type="button" class="btn btn-danger">Xóa chuyến này </button>
    </a>
    <button type="button" class="btn btn-info" data-dismiss="modal">Hủy</button>
</p>
<script>
    window.onload = loadRequest();

    function loadRequest() {
        var tripID = @Model.TripID.ToString()
        $.ajax({
            url: "/Trip/RelatedRequests",
            type: "Post",
            data: { tripID: tripID },
            success: function (result) {
                $("#requests").html(result);
            }
        });
    }

    function arrived() {
        var tripID = @Model.TripID.ToString()
        $.ajax({
            url: "/Trip/ArrivedRequest",
            type: "Post",
            data: { tripID: tripID },
            success: function (result) {
            }
        });
    }

    function departed() {
        var tripID = @Model.TripID.ToString()
        $.ajax({
            url: "/Trip/DepartedRequest",
            type: "Post",
            data: { tripID: tripID },
            success: function (result) {
            }
        });
    }
</script>
