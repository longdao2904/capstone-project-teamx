@model IEnumerable<Captone.Models.Assigning>

@{
    Layout = null;
}

    <div class="table-responsive">
        <table class="table">
            <tr>
                <th>Người gửi
                </th>
                <th>Ngày gửi
                </th>
                <th>Trạm gửi
                </th>
                <th>Trạm nhận
                </th>
                <th>Trạng thái
                </th>
                <th></th>
                <th></th>
              
            </tr>

            @foreach (var item in Model)
            {            
                <tr>
                    <td style="display: none;">
                        @item.RequestID
                    </td>
                    <td>
                        @item.Request.Username
                    </td>
                    <td>
                        @item.Request.DateRequest.ToShortDateString()
                    </td>
                    <td>
                        @item.Request.Station.StationName
                    </td>
                    <td>
                        @item.Request.Station1.StationName
                    </td>
                    <td>
                        @item.Request.DeliveryStatu.StatusName
                    </td>
                    <td style="display: none" id="deliverysttID">
                        @item.Request.DeliveryStatusID
                    </td>
                    <td></td>
                 
                </tr>
            }
        </table>
    </div>
<script>
    $(document).ready(function () {
        $('#selectall').click(function (event) {  //on click 
            if (this.checked) { // check select status
                $('.case').each(function () { //loop through each checkbox
                    this.checked = true;  //select all checkboxes with class "checkbox1"  
                });
            } else {
                $('.case').each(function () { //loop through each checkbox
                    this.checked = false; //deselect all checkboxes with class "checkbox1"                       
                });
            }
        });

    });
    function getRequest() {
        var request = [];
        $('[name="Requests"]:checked').each(function () {
            var row = $(this).closest('tr');
            var emp = {
                // we start at 2 because the first one is the checkbox
                // also it would be easier if you have an id for each of the column
                // and do this row.find('#idCol') / row.find('#nameCol')
                RequestID: row.find('td:nth-child(1)').text()
            };
            request.push(emp);
            // SentObject(request);
        });
        return request;
    }
    function Arrival() {
        var request = getRequest();
        $.ajax({
            url: "/Trip/Arrival",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify({ request: request }),
            success: function (result) {
                
            }
        });
    }
</script>
